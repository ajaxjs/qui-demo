import{ar as e,ao as a,_ as l,n as t,p as n,aa as o,r as u,k as s,a as r,o as c,g as d,w as i,d as f,f as m,t as v,c as p,F as y,e as _,as as h,C as V,h as q,R as w,m as k,at as b,au as Y,j as C,b as M}from"./index-TqW3uz4B.js";import{Q as g}from"./q-card.EWS9hRB-.js";import{c as S}from"./date-nongli.BjaBr7_O.js";const D=(e,a,l)=>{a.prototype.lunar=function(){return S.solar2lunar(this.$y,this.$M+1,this.$D)}};let j=(e.external||{}).dayjs;try{j.extend(D)}catch(O){j=new Function,console.error("请在qui.config.js中的external中引入dayjs")}class x{constructor(e,a){const l=j(e);this.firstDay=j().date(1),this.lastDay=j().date(l.daysInMonth()),this.today=l,this.locale=l.$locale()}days(){const e=this.today.daysInMonth(),a=this.firstDay.day()-1,l=[];for(let t=1;t<=42;t++){const n=this.today.date(t-a);n.date(),n.index=t-1,n.today=n.isSame(j(),"day"),t<=a?n.prev=!0:t-a>e?n.next=!0:n.current=!0,l.push(n)}return l}weeks(){const e=this.days();return new Array(6).fill("").map(((a,l)=>e.splice(0,7)))}}const $={modelValue:String,defaultYearMonth:[Array,String],showLunar:Boolean,dateInfo:Array,todayClass:String,todayBtn:Boolean,activeClass:String,format:{type:String,default:"YYYY-MM-DD"}};function I(e,{emit:a}){function l(e){return e instanceof j}function t(e){return l(e)?e:j(e)}function n(a){return t(a).format(e.format)}return{isDayjs:l,toDayjs:t,toStrDate:n,parseYm:function(a){return a=(a=(a=Array.isArray(a)?a.filter((e=>!!e)).join("-"):a)||n(e.modelValue||new Date)).split(/[\,\-\/]/).map((e=>parseInt(e.trim()))).splice(0,2)}}}const U=l({__name:"CalendarView",props:$,emits:["update:modelValue","update:year","update:month","laoutView"],setup(e,{expose:l,emit:b}){const Y=e,C=t(),M=b,{toStrDate:g,parseYm:S}=I(Y,{emit:M}),D=t(Y.modelValue),$=n({get:()=>Y.modelValue?j(D.value):null,set(e){D.value=g(e)}});o((()=>Y.modelValue),(e=>D.value=e));const U=t(S(Y.defaultYearMonth)),L=n((()=>j(U.value.join("-")+"-1")));function A(e){U.value=S(e.format("YYYY-MM"))}o((()=>Y.modelValue),(e=>U.value=S(e))),o((()=>Y.defaultYearMonth),(e=>U.value=S(e)));const B=n((()=>{return(e=U.value.join("-")+"-1",e instanceof x?a(e):new x(e)).weeks();var e})),T=j().$locale().weekdaysShort;function O(e,a){!function(e,a){$.value=e,M("update:modelValue",D.value,e,a)}(e,a)}function F(e){M("laoutView",e)}function N(e){const a=D.value==e.format("YYYY-MM-DD");return[e.current?"current":"outday",e.prev?"prev":"",e.next?"next":"",e.today?Y.todayClass||"today":"",a?Y.activeClass||"selected":""]}return l({parseYm:S}),(e,a)=>{const l=u(r("q-btn"),s),t=k;return c(),d(t,{class:"q-calendar__view column"},{default:i((()=>[f(t,{class:"row q-pb-sm"},{default:i((()=>[f(t,{class:"col row items-center"},{default:i((()=>[f(l,{flat:"",dense:"",icon:e.$q.iconSet.tabs.left,onClick:a[0]||(a[0]=e=>A(L.value.add(-1,"year")))},null,8,["icon"]),f(l,{flat:"",dense:"",class:"col text-center",onClick:a[1]||(a[1]=e=>F("Years"))},{default:i((()=>[m(v(L.value.year()),1)])),_:1}),f(l,{flat:"",dense:"",icon:e.$q.iconSet.tabs.right,onClick:a[2]||(a[2]=e=>A(L.value.add(1,"year")))},null,8,["icon"])])),_:1}),f(t,{class:"col row items-center"},{default:i((()=>[f(l,{flat:"",dense:"",icon:e.$q.iconSet.tabs.left,onClick:a[3]||(a[3]=e=>A(L.value.add(-1,"month")))},null,8,["icon"]),f(l,{flat:"",dense:"",class:"col text-center",onClick:a[4]||(a[4]=e=>F("Months"))},{default:i((()=>[m(v(L.value.format("MMM")),1)])),_:1}),f(l,{flat:"",dense:"",icon:e.$q.iconSet.tabs.right,onClick:a[5]||(a[5]=e=>A(L.value.add(1,"month")))},null,8,["icon"])])),_:1})])),_:1}),f(t,{class:"q-calendar__table column col"},{default:i((()=>[f(t,{class:"row"},{default:i((()=>[(c(!0),p(y,null,_(h(T),((e,a)=>(c(),d(t,{class:"th col",key:a},{default:i((()=>[m(v(e),1)])),_:2},1024)))),128))])),_:1}),f(t,{class:"col column"},{default:i((()=>[(c(!0),p(y,null,_(B.value,((a,l)=>(c(),d(t,{class:"row col",key:l},{default:i((()=>[(c(!0),p(y,null,_(a,((a,l)=>(c(),d(t,{class:V(["day td col row items-center justify-center",N(a)]),key:l,onClick:e=>O(a,e),onTouchstart:e=>function(e,a){C.value[e.index].ripple(a)}(a,e)},{default:i((()=>[f(t,{class:""},{default:i((()=>[f(t,{class:"num"},{default:i((()=>[m(v(a.date()),1)])),_:2},1024),e.showLunar?(c(),d(t,{key:0,class:"txt"},{default:i((()=>[m(v(a.lunar().LunarDayZh),1)])),_:2},1024)):q("",!0),f(w,{ref_for:!0,ref_key:"ripple",ref:C},null,512)])),_:2},1024)])),_:2},1032,["onClick","onTouchstart","class"])))),128))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-2ecb9bf8"]]),L={__name:"YearView",props:{modelValue:[Number,String]},emits:["update:year"],setup(e,{emit:a}){const l=t(parseInt(e.modelValue)),o=a,m=n((()=>{const e=parseInt(l.value),a=[];for(let l=e-16;l<=e+16;l++)a.push(l+"");return a}));function v(e){const a=e==l.value,t={label:""+e,dense:!0,color:a?"primary":"blue-grey",class:["col-4",a?"active":""]};return a?t.unelevated=!0:t.outline=!0,t}return(e,a)=>{const t=u(r("q-btn"),s),n=k;return c(),d(n,{class:"q-calendar__year q-calendar__view row"},{default:i((()=>[f(t,{flat:"",dense:"",icon:e.$q.iconSet.tabs.left,onClick:a[0]||(a[0]=e=>l.value-=11)},null,8,["icon"]),f(n,{class:"col row q-gutter-sm"},{default:i((()=>[(c(!0),p(y,null,_(m.value,(e=>(c(),d(n,{class:"",key:e},{default:i((()=>[f(t,b(v(e),{onClick:a=>function(e){o("update:year",parseInt(e))}(e)}),null,16,["onClick"])])),_:2},1024)))),128))])),_:1}),f(t,{flat:"",dense:"",icon:e.$q.iconSet.tabs.right,onClick:a[1]||(a[1]=e=>l.value+=11)},null,8,["icon"])])),_:1})}}},A=l({__name:"MonthView",props:{modelValue:[String,Number]},emits:["update:modelValue"],setup(e,{emit:a}){const l=j(),n=l.$locale().monthsShort||l.$locale().months,o=a,m=t(parseInt(e.modelValue));function v(e){const a=m.value-1==e,l={color:a?"primary":"blue-grey"};return a?l.unelevated=!0:l.outline=!0,l}return(e,a)=>{const l=u(r("q-btn"),s),t=k;return c(),d(t,{class:"q-calendar__view column"},{default:i((()=>[f(t,{class:"q-calendar__month row col q-col-gutter-sm justify-around items-center full-height"},{default:i((()=>[(c(!0),p(y,null,_(h(n),((e,a)=>(c(),d(t,{class:"col-4 text-center",key:a},{default:i((()=>[f(l,b(v(a),{class:"mon-btn",label:e,onClick:e=>function(e){console.log(e),o("update:modelValue",e)}(a)}),null,16,["label","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-9bc3db6d"]]),B={__name:"q-calendar",props:Object.assign($,{minimal:Boolean,defaultView:{type:String,validator:e=>["Calendar","Months","Years"].includes(e),default:"Calendar"}}),emits:["update:modelValue","update:year","update:month"],setup(e,{expose:a,emit:l}){const u=Y(),r=l,p=e,{toDayjs:y,toStrDate:_,parseYm:V}=I(p,{emit:r}),w=t(p.modelValue),M=n({get:()=>p.modelValue?j(w.value):null,set(e){w.value=_(e)}}),S=t(V(p.defaultYearMonth));o((()=>p.modelValue),(e=>S.value=V(e))),o((()=>p.defaultYearMonth),(e=>S.value=V(e)));const D=n((()=>Object.assign({},p,{modelValue:w.value,defaultYearMonth:S.value})));function x(e,a,l){w.value=e,M.value=a,r("update:modelValue",e,a,l)}const $=t(p.defaultView);function B(e){$.value=e}function T(e){const a=j(e);a&&a.isValid()?x(_(a),a):console.error("非法日期！")}function O(e){const a=S.value;a[0]=e,S.value=a,r("update:year",e,S.value),$.value="Months"}function F(e){S.value[1]=e+1,r("update:year",e,S.value),$.value="Calendar"}return a({setToday:T}),(e,a)=>{const l=k;return c(),d(g,b({class:"q-calendar"},h(u),{class:e.showLunar?"q-calendar-lunar":""}),{default:i((()=>[e.minimal?q("",!0):(c(),d(l,{key:0,class:"q-calendar__header row items-center bg-primary"},{default:i((()=>[C("div",{class:"col"},[f(l,{class:"q-calendar__header-year",onClick:a[0]||(a[0]=e=>$.value="Years")},{default:i((()=>[m(v(M.value?M.value.year():"--"),1)])),_:1}),f(l,{class:"q-calendar__header-date",onClick:a[1]||(a[1]=e=>$.value="Months")},{default:i((()=>[m(v(M.value?M.value.format("MMM DD ddd"):"--"),1)])),_:1})]),e.todayBtn?(c(),d(s,{key:0,dense:"",flat:"",icon:"event",id:"today",onClick:a[2]||(a[2]=e=>T(new Date))})):q("",!0)])),_:1})),f(l,{class:"q-calendar__body q-pa-sm"},{default:i((()=>["Years"==$.value?(c(),d(L,{key:0,"model-value":S.value[0],"onUpdate:year":O},null,8,["model-value"])):"Months"==$.value?(c(),d(A,{key:1,"model-value":S.value[1],"onUpdate:modelValue":F},null,8,["model-value"])):(c(),d(U,b({key:2},D.value,{"onUpdate:modelValue":x,onLaoutView:B}),null,16))])),_:1})])),_:1},16,["class"])}}},T={__name:"calendar",setup(e){const a=t(),l=t(),n=t(),o=[{date:"",after:"促销"},{date:"",before:"节日"}];function d(e,a,t){l.value=a,console.log(e,a)}function _(e,a){}function h(e,a){}return(e,l)=>{const t=u(r("q-calendar"),B),V=k,q=u(r("q-btn"),s),w=M("Lanmu");return c(),p(y,null,[f(w,{title:"农历日历"},{default:i((()=>[f(t,{ref:"calendar",showLunar:"",modelValue:a.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>a.value=e),d],"date-info":o,"onUpdate:year":_,"onUpdate:month":h,"default-year-month":n.value},null,8,["modelValue","default-year-month"]),f(V,{class:"q-pa-sm"},{default:i((()=>[m(" 日期："+v(a.value),1)])),_:1}),f(V,{class:"q-pa-sm q-gutter-sm"},{default:i((()=>[f(q,{label:"设置日期到2025-5-16",color:"primary",onClick:l[1]||(l[1]=a=>e.$refs.calendar.setToday("2025-5-16"))}),f(q,{label:"设置年-月",color:"primary",onClick:l[2]||(l[2]=e=>n.value="1995-8")})])),_:1})])),_:1}),f(w,{title:"日历"},{default:i((()=>[f(t,{modelValue:a.value,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value=e),"today-btn":""},null,8,["modelValue"]),f(V,{class:"q-pa-sm"},{default:i((()=>[m(" 日期："+v(a.value),1)])),_:1})])),_:1}),f(w,{title:"默认年视图"},{default:i((()=>[f(t,{modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value=e),"today-btn":"","default-view":"Years"},null,8,["modelValue"]),f(V,{class:"q-pa-sm"},{default:i((()=>[m(" 日期："+v(a.value),1)])),_:1}),C("div",{class:"q-pa-sm"},' default-view = "Years" (Years | Months) ')])),_:1})],64)}}};export{T as default};
