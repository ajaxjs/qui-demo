import{p as e,N as a,K as i,q as t,n as r,aa as l,_ as o,r as s,a as n,o as g,g as d,w as u,D as c,h as m,c as S,B as y,d as p,C as f,m as h,aP as v}from"./index-TqW3uz4B.js";const _=o(a({name:"QImg",components:{QSpinner:i},props:{...{ratio:[String,Number]},...t,src:String,alt:String,crossorigin:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:16/9},placeholderSrc:String,fit:Boolean,position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String,mode:{type:String,default:"scaleToFill"},error:String},emits:["load","error"],setup(a,{emit:i,attrs:t}){const o=r(a.src);let s=r(a.initialRatio);const n=function(a,i){return e((()=>{const e=Number(a.ratio||(void 0!==i?i.value:void 0));return!0!==isNaN(e)&&e>0?{paddingBottom:100/e+"%"}:null}))}(a,s),g=e((()=>[a.src,a.placeholderSrc])),d=r(!1),u=r(!0),c=r(!1),m=e=>e&&/^\d+$/.test(e.trim())?e.trim()+"px":e,S=e((()=>`q-img q-img--${!0===a.noNativeMenu?"no-":""}menu`)),y=e((()=>{const e={width:m(a.width),height:m(a.height)};return Object.keys(e).forEach((a=>null==e[a]&&delete e[a])),e})),p=e((()=>["q-img__image",a.imgClass,`q-img__image--with${!0===a.noTransition?"out":""}-transition`,d.value?"q-img__image--loaded":null,a.fit?"fit":null])),f=e((()=>({...a.imgStyle,objectPosition:a.position})));l((()=>a.src),(e=>{o.value=e,u.value=!0,d.value=!1,c.value=!1}));return{imgSrc:o,onLoad:e=>{const{width:a,height:t}=e.detail;s.value=0==t?.5:a/t,d.value=!0,u.value=!1,c.value=!1,i("load",e)},onError:e=>{o.value=a.error,d.value=!1,u.value=!1,c.value=!0,i("error",e)},isLoaded:d,isLoading:u,hasError:c,classes:S,defaultStyle:y,ratioStyle:n,imgClass:p,imgStyle:f,images:g}}}),[["render",function(e,a,t,r,l,o){const _=h,b=s(n("q-spinner"),i),q=v;return g(),d(_,{class:f([e.classes,e.className]),style:c([e.defaultStyle,e.styles]),role:"img","aria-label":e.alt},{default:u((()=>[e.fit?m("",!0):(g(),d(_,{class:"q-img__ratio",style:c(e.ratioStyle),key:"filler"},null,8,["style"])),e.isLoading?(g(),S("div",{key:e.loading,class:"q-img__loading absolute-full flex flex-center"},[e.$slots.loading?y(e.$slots,"loading",{key:0}):m("",!0),!0!==e.noSpinner?(g(),d(b,{key:1,size:e.spinnerSize,color:e.spinnerColor},null,8,["size","color"])):m("",!0)])):m("",!0),p(_,{class:"q-img__container absolute-full"},{default:u((()=>[p(q,{src:e.imgSrc,class:f(e.imgClass),style:c(e.imgStyle),crossorigin:e.crossorigin,draggable:e.draggable,"aria-hidden":"true",mode:e.mode,onLoad:e.onLoad,onError:e.onError},null,8,["src","class","style","crossorigin","draggable","mode","onLoad","onError"])])),_:1}),p(_,{class:"q-img__content absolute-full q-anchor--skip"},{default:u((()=>[e.hasError?y(e.$slots,"error",{key:0}):y(e.$slots,"default",{key:1})])),_:3})])),_:3},8,["class","style","aria-label"])}]]);export{_};
