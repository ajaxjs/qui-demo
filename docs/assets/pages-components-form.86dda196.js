import{_ as e,a as o}from"./q-field.a9a9e323.js";import{N as l,s as a,n as t,a2 as n,a3 as s,a4 as u,R as r,a5 as i,a6 as d,a7 as c,_ as m,a8 as f,o as p,g as b,w as _,a as h,C as v,D as g,B as V,k as y,a9 as q,r as k,d as x,t as S,e as j,l as U,f as F}from"./index-f676a6ba.js";import{_ as I}from"./q-checkbox.c47d96cd.js";import{_ as R}from"./q-datetime.aea10997.js";import{_ as w}from"./q-radio.24b1b6fa.js";import{_ as B}from"./q-page.fec06fa6.js";import"./use-form.99633686.js";import"./q-btn-group.a78a3653.js";import"./q-dialog.df8bdd28.js";import"./use-model-toggle.81c64145.js";let N=[];const O=m(l({name:"QForm",inheritAttrs:!1,props:{...a,autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:l,attrs:a}){const m=r(),p=t(null);let b=0;const _=[];function h(o){const a="boolean"==typeof o?o:!0!==e.noErrorFocus,t=++b,n=(e,o)=>{l("validation"+(!0===e?"Success":"Error"),o)},s=e=>{const o=e.validate();return"function"==typeof o.then?o.then((o=>({valid:o,comp:e})),(o=>({valid:!1,comp:e,err:o}))):Promise.resolve({valid:o,comp:e})};return(!0===e.greedy?Promise.all(_.map(s)).then((e=>e.filter((e=>!0!==e.valid)))):_.reduce(((e,o)=>e.then((()=>s(o).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]))).then((e=>{if(void 0===e||0===e.length)return t===b&&n(!0),!0;if(t===b){const{comp:o,err:l}=e[0];if(void 0!==l&&console.error(l),n(!1,o),!0===a){const o=e.find((({comp:e})=>"function"==typeof e.focus&&!1===i(e.$)));void 0!==o&&o.comp.focus()}}return!1}))}function v(){b++,_.forEach((e=>{"function"==typeof e.resetValidation&&e.resetValidation()}))}function g(o){const a=b+1;h().then((t=>{a===b&&!0===t&&(void 0!==e.onSubmit?l("submit",o):void 0!==o&&void 0!==o.target&&"function"==typeof o.target.submit&&o.target.submit())}))}function V(o){l("reset"),d((()=>{v(),!0===e.autofocus&&!0!==e.noResetFocus&&y()}))}function y(){var e;e=()=>{if(null===p.value)return;const e=p.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||p.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||p.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(p.value.querySelectorAll("[tabindex]"),(e=>e.tabIndex>-1));null!=e&&e.focus({preventScroll:!0})},0===N.length&&e()}c(f,{bindComponent(e){_.push(e)},unbindComponent(e){const o=_.indexOf(e);o>-1&&_.splice(o,1)}});let q=!1;return n((()=>{q=!0})),s((()=>{!0===q&&!0===e.autofocus&&y()})),u((()=>{!0===e.autofocus&&y()})),Object.assign(m.proxy,{validate:h,resetValidation:v,submit:g,reset:V,focus:y,getValidationComponents:()=>_}),console.log(m.proxy),{submit:g,reset:V}}}),[["render",function(e,o,l,a,t,n){const s=y,u=q;return p(),b(u,{ref:"rootRef",class:"q-form",onSubmit:e.submit,onReset:e.reset},{default:_((()=>[h(s,{class:v(e.className),style:g(e.styles)},{default:_((()=>[V(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["onSubmit","onReset"])}],["__scopeId","data-v-74d1d0fb"]]);const E=m({data:()=>({statusOpt:[{label:"在线",value:"在线",icon:"emoji_emotions"},{label:"离线",value:"离线",icon:"sentiment_neutral"},{label:"勿扰",value:"勿扰",icon:"block"}],hobby:[{label:"听音乐",value:"听音乐",uncheckedIcon:"headset"},{label:"打篮球",value:"打篮球",uncheckedIcon:"sports_basketball"},{label:"看电影",value:"看电影",uncheckedIcon:"theaters"},{label:"玩手机",value:"刷手机",uncheckedIcon:"phone"},{label:"玩手机",value:"玩游戏",uncheckedIcon:"sports_esports"}],prms:{},info:{hobby:["看电影"]}}),methods:{submit(e){console.log("submit",e)}}},[["render",function(l,a,t,n,s,u){const r=k(j("q-input"),e),i=y,d=k(j("q-checkbox"),I),c=k(j("q-btn"),U),m=k(j("q-form"),O),f=F("Lanmu"),v=k(j("q-datetime"),R),g=k(j("q-field"),o),V=k(j("q-radio"),w),q=k(j("q-page"),B);return p(),b(q,null,{default:_((()=>[h(f,{title:"用户登录"},{default:_((()=>[h(m,{className:"myform q-gutter-md"},{default:_((()=>[h(i,null,{default:_((()=>[h(r,{modelValue:s.prms.username,"onUpdate:modelValue":a[0]||(a[0]=e=>s.prms.username=e),label:"用户名",outlined:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(r,{modelValue:s.prms.password,"onUpdate:modelValue":a[1]||(a[1]=e=>s.prms.password=e),label:"密码",outlined:"",password:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(d,{modelValue:s.prms.remember,"onUpdate:modelValue":a[2]||(a[2]=e=>s.prms.remember=e),val:1,label:"记住密码"},null,8,["modelValue"])])),_:1}),h(i,{class:"q-gutter-x-sm"},{default:_((()=>[h(c,{type:"submit",label:"立即提交",color:"primary"}),h(c,{type:"reset",label:"重置表单",color:"green"})])),_:1})])),_:1}),h(i,{class:"q-pa-md bg-orange-2 q-mt-md"},{default:_((()=>[x(S(JSON.stringify(s.prms)),1)])),_:1})])),_:1}),h(f,{title:"用户资料"},{default:_((()=>[h(m,{className:"myform q-gutter-md"},{default:_((()=>[h(i,null,{default:_((()=>[h(r,{modelValue:s.info.username,"onUpdate:modelValue":a[3]||(a[3]=e=>s.info.username=e),label:"用户昵称",outlined:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(r,{modelValue:s.info.phone,"onUpdate:modelValue":a[4]||(a[4]=e=>s.info.phone=e),type:"tel",label:"电话号码",outlined:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"生日","stack-label":!!s.info.born},{control:_((()=>[h(v,{modelValue:s.info.born,"onUpdate:modelValue":a[5]||(a[5]=e=>s.info.born=e)},null,8,["modelValue"])])),_:1},8,["stack-label"])])),_:1}),h(i,{class:""},{default:_((()=>[h(g,{outlined:"",label:"用户性别","stack-label":""},{control:_((()=>[h(V,{modelValue:s.info.sex,"onUpdate:modelValue":a[6]||(a[6]=e=>s.info.sex=e),options:["男","女"],"checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"])])),_:1})])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"状态","stack-label":""},{control:_((()=>[h(V,{modelValue:s.info.status,"onUpdate:modelValue":a[7]||(a[7]=e=>s.info.status=e),options:s.statusOpt},null,8,["modelValue","options"])])),_:1})])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"兴趣爱好","stack-label":"",autogrow:""},{control:_((()=>[h(d,{modelValue:s.info.hobby,"onUpdate:modelValue":a[8]||(a[8]=e=>s.info.hobby=e),options:s.hobby},null,8,["modelValue","options"])])),_:1})])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"标签","stack-label":"",autogrow:""},{control:_((()=>[h(d,{modelValue:s.info.tags,"onUpdate:modelValue":a[9]||(a[9]=e=>s.info.tags=e),options:["颜值担当","实力不凡","一夫当关","万夫莫开"]},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(i,{class:"q-pa-md bg-orange-2 q-mt-md"},{default:_((()=>[x(S(JSON.stringify(s.info)),1)])),_:1})])),_:1})])),_:1})}]]);export{E as default};
