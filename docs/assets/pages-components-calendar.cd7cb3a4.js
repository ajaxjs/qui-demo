import{ar as e,ao as a,_ as t,n as l,p as n,aa as o,r as s,l as r,e as u,o as c,g as d,w as i,a as f,u as m,d as y,t as p,c as v,F as _,b as h,C as V,h as b,T as k,k as q,as as w,at as g,j as C,f as M}from"./index-9a2cee6e.js";import{Q as Y}from"./q-card.eb63009b.js";import{c as S}from"./date-nongli.9494412a.js";const j=function e(a,...t){let l=Object.assign({},a);return t.forEach((a=>{a&&Object.keys(a).forEach((t=>{const n=l[t],o=a[t];o&&"object"==typeof o&&!Array.isArray(o)&&n&&"object"==typeof n?l[t]=e(n,o):o&&Array.isArray(o)&&n&&Array.isArray(n)?l[t]=n.concat(o):l[t]=o}))})),l}({headHeight:44,footHeight:50,lang:"zh-CN",notify:{position:"top",timeout:2500},iconSet:{icon:"material-icons",field:{error:"error",clear:"cancel",left:"chevron_left",right:"chevron_right"}},external:{}},e),x=(e,a,t)=>{a.prototype.lunar=function(){return S.solar2lunar(this.$y,this.$M+1,this.$D)}},{dayjs:D}=j.external;try{D.extend(x)}catch(O){console.error("请在qui.config.js中的external中引入dayjs")}class ${constructor(e,a){const t=D(e);this.firstDay=D().date(1),this.lastDay=D().date(t.daysInMonth()),this.today=t,this.locale=t.$locale()}days(){const e=this.today.daysInMonth(),a=this.firstDay.day()-1,t=[];for(let l=1;l<=42;l++){const n=this.today.date(l-a);n.date(),n.index=l-1,n.today=n.isSame(D(),"day"),l<=a?n.prev=!0:l-a>e?n.next=!0:n.current=!0,t.push(n)}return t}weeks(){const e=this.days();return new Array(6).fill("").map(((a,t)=>e.splice(0,7)))}}const A={modelValue:String,defaultYearMonth:[Array,String],showLunar:Boolean,dateInfo:Array,todayClass:String,todayBtn:Boolean,activeClass:String,format:{type:String,default:"YYYY-MM-DD"}};function I(e,{emit:a}){function t(e){return e instanceof D}function l(e){return t(e)?e:D(e)}function n(a){return l(a).format(e.format)}return{isDayjs:t,toDayjs:l,toStrDate:n,parseYm:function(a){return a=(a=(a=Array.isArray(a)?a.filter((e=>!!e)).join("-"):a)||n(e.modelValue||new Date)).split(/[\,\-\/]/).map((e=>parseInt(e.trim()))).splice(0,2)}}}const U=t({__name:"CalendarView",props:A,emits:["update:modelValue","update:year","update:month","laoutView"],setup(e,{expose:t,emit:w}){const g=e,C=l(),{toStrDate:M,parseYm:Y}=I(g,{emit:w}),S=l(g.modelValue),j=n({get:()=>g.modelValue?D(S.value):null,set(e){S.value=M(e)}}),x=l(Y(g.defaultYearMonth)),A=n((()=>D(x.value.join("-")+"-1")));function U(e){x.value=Y(e.format("YYYY-MM"))}o((()=>g.modelValue),(e=>x.value=Y(e))),o((()=>g.defaultYearMonth),(e=>x.value=Y(e)));const L=n((()=>{return(e=x.value.join("-")+"-1",e instanceof $?a(e):new $(e)).weeks();var e})),B=D().$locale().weekdaysShort;function T(e,a){!function(e,a){j.value=e,w("update:modelValue",S.value,e,a)}(e,a)}function N(e){w("laoutView",e)}function O(e){return[e.current?"current":"outday",e.prev?"prev":"",e.next?"next":"",e.today?g.todayClass||"today":"",e.isSame(S.value,"day")?g.activeClass||"selected":""]}return t({parseYm:Y}),(e,a)=>{const t=s(u("q-btn"),r),l=q;return c(),d(l,{class:"q-calendar__view column"},{default:i((()=>[f(l,{class:"row q-pb-sm"},{default:i((()=>[f(l,{class:"col row items-center"},{default:i((()=>[f(t,{flat:"",dense:"",icon:e.$q.iconSet.tabs.left,onClick:a[0]||(a[0]=e=>U(m(A).add(-1,"year")))},null,8,["icon"]),f(t,{flat:"",dense:"",class:"col text-center",onClick:a[1]||(a[1]=e=>N("Years"))},{default:i((()=>[y(p(m(A).year()),1)])),_:1}),f(t,{flat:"",dense:"",icon:e.$q.iconSet.tabs.right,onClick:a[2]||(a[2]=e=>U(m(A).add(1,"year")))},null,8,["icon"])])),_:1}),f(l,{class:"col row items-center"},{default:i((()=>[f(t,{flat:"",dense:"",icon:e.$q.iconSet.tabs.left,onClick:a[3]||(a[3]=e=>U(m(A).add(-1,"month")))},null,8,["icon"]),f(t,{flat:"",dense:"",class:"col text-center",onClick:a[4]||(a[4]=e=>N("Months"))},{default:i((()=>[y(p(m(A).format("MMM")),1)])),_:1}),f(t,{flat:"",dense:"",icon:e.$q.iconSet.tabs.right,onClick:a[5]||(a[5]=e=>U(m(A).add(1,"month")))},null,8,["icon"])])),_:1})])),_:1}),f(l,{class:"q-calendar__table column col"},{default:i((()=>[f(l,{class:"row"},{default:i((()=>[(c(!0),v(_,null,h(m(B),((e,a)=>(c(),d(l,{class:"th col",key:a},{default:i((()=>[y(p(e),1)])),_:2},1024)))),128))])),_:1}),f(l,{class:"col column"},{default:i((()=>[(c(!0),v(_,null,h(m(L),((a,t)=>(c(),d(l,{class:"row col",key:t},{default:i((()=>[(c(!0),v(_,null,h(a,((a,t)=>(c(),d(l,{class:V(["day td col row items-center justify-center",O(a)]),key:t,onClick:e=>T(a,e),onTouchstart:e=>function(e,a){C.value[e.index].ripple(a)}(a,e)},{default:i((()=>[f(l,{class:""},{default:i((()=>[f(l,{class:"num"},{default:i((()=>[y(p(a.date()),1)])),_:2},1024),e.showLunar?(c(),d(l,{key:0,class:"txt"},{default:i((()=>[y(p(a.lunar().LunarDayZh),1)])),_:2},1024)):b("",!0),f(k,{ref_for:!0,ref_key:"ripple",ref:C},null,512)])),_:2},1024)])),_:2},1032,["onClick","onTouchstart","class"])))),128))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-321d44c3"]]),L={__name:"YearView",props:{modelValue:[Number,String]},emits:["update:year"],setup(e,{emit:a}){const t=l(parseInt(e.modelValue)),o=n((()=>{const e=parseInt(t.value),a=[];for(let t=e-10;t<=e+10;t++)a.push(t+"");return a}));return(e,l)=>{const n=s(u("q-btn"),r),y=q;return c(),d(y,{class:"q-calendar__year q-calendar__view row"},{default:i((()=>[f(n,{flat:"",dense:"",icon:e.$q.iconSet.tabs.left,onClick:l[0]||(l[0]=e=>t.value-=11)},null,8,["icon"]),f(y,{class:"col row"},{default:i((()=>[(c(!0),v(_,null,h(m(o),(e=>(c(),d(n,w(function(e){const a=e==t.value,l={label:""+e,dense:!0,color:a?"primary":"blue-grey",class:["col-4",a?"active":""]};return a?l.unelevated=!0:l.flat=!0,l}(e),{key:e,onClick:t=>function(e){a("update:year",parseInt(e))}(e)}),null,16,["onClick"])))),128))])),_:1}),f(n,{flat:"",dense:"",icon:e.$q.iconSet.tabs.right,onClick:l[1]||(l[1]=e=>t.value+=11)},null,8,["icon"])])),_:1})}}},B=t({__name:"MonthView",props:{modelValue:[String,Number]},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,n=D(),o=n.$locale().monthsShort||n.$locale().months,y=l(parseInt(t.modelValue));function p(e){const a=y.value-1==e,t={color:a?"primary":"blue-grey"};return a?t.unelevated=!0:t.outline=!0,t}return(e,t)=>{const l=s(u("q-btn"),r),n=q;return c(),d(n,{class:"q-calendar__view column"},{default:i((()=>[f(n,{class:"q-calendar__month row col q-col-gutter-sm justify-around items-center full-height"},{default:i((()=>[(c(!0),v(_,null,h(m(o),((e,t)=>(c(),d(n,{class:"col-4 text-center",key:t},{default:i((()=>[f(l,w(p(t),{class:"mon-btn",label:e,onClick:e=>function(e){console.log(e),a("update:modelValue",e)}(t)}),null,16,["label","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-9bc3db6d"]]),T={__name:"q-calendar",props:Object.assign(A,{minimal:Boolean,defaultView:{type:String,validator:e=>["Calendar","Months","Years"].includes(e),default:"Calendar"}}),emits:["update:modelValue","update:year","update:month"],setup(e,{expose:a,emit:t}){const s=e,u=g(),{toDayjs:v,toStrDate:_,parseYm:h}=I(s,{emit:t}),V=l(s.modelValue),k=n({get:()=>s.modelValue?D(V.value):null,set(e){V.value=_(e)}}),M=l(h(s.defaultYearMonth));o((()=>s.modelValue),(e=>M.value=h(e))),o((()=>s.defaultYearMonth),(e=>M.value=h(e)));const S=n((()=>Object.assign({},s,{modelValue:V.value,defaultYearMonth:M.value})));function j(e,a,l){k.value=a,t("update:modelValue",e,a,l)}const x=l(s.defaultView);function $(e){x.value=e}function A(e){const a=D(e);a&&a.isValid()?(k.value=a,j(_(a),a)):console.error("非法日期！")}function T(e){const a=M.value;a[0]=e,M.value=a,t("update:year",e,M.value),x.value="Months"}function N(e){M.value[1]=e+1,t("update:year",e,M.value),x.value="Calendar"}return a({setToday:A}),(e,a)=>{const t=q;return c(),d(Y,w({class:"q-calendar"},m(u),{class:e.showLunar?"q-calendar-lunar":""}),{default:i((()=>[e.minimal?b("",!0):(c(),d(t,{key:0,class:"q-calendar__header row items-center bg-primary"},{default:i((()=>[C("div",{class:"col"},[f(t,{class:"q-calendar__header-year",onClick:a[0]||(a[0]=e=>x.value="Years")},{default:i((()=>[y(p(m(k)?m(k).year():"--"),1)])),_:1}),f(t,{class:"q-calendar__header-date",onClick:a[1]||(a[1]=e=>x.value="Months")},{default:i((()=>[y(p(m(k)?m(k).format("MMM DD ddd"):"--"),1)])),_:1})]),e.todayBtn?(c(),d(r,{key:0,dense:"",flat:"",icon:"event",id:"today",onClick:a[2]||(a[2]=e=>A(new Date))})):b("",!0)])),_:1})),f(t,{class:"q-calendar__body q-pa-sm"},{default:i((()=>["Years"==x.value?(c(),d(L,{key:0,"model-value":M.value[0],"onUpdate:year":T},null,8,["model-value"])):"Months"==x.value?(c(),d(B,{key:1,"model-value":M.value[1],"onUpdate:modelValue":N},null,8,["model-value"])):(c(),d(U,w({key:2},m(S),{"onUpdate:modelValue":j,onLaoutView:$}),null,16))])),_:1})])),_:1},16,["class"])}}},N={__name:"calendar",setup(e){const a=l(),t=l(),n=l(),o=[{date:"",after:"促销"},{date:"",before:"节日"}];function d(e,a,l){t.value=a,console.log(e,a)}function m(e,a){}function h(e,a){}return(e,t)=>{const l=s(u("q-calendar"),T),V=q,b=s(u("q-btn"),r),k=M("Lanmu");return c(),v(_,null,[f(k,{title:"农历日历"},{default:i((()=>[f(l,{ref:"calendar",showLunar:"",modelValue:a.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.value=e),d],"date-info":o,"onUpdate:year":m,"onUpdate:month":h,"default-year-month":n.value},null,8,["modelValue","default-year-month"]),f(V,{class:"q-pa-sm"},{default:i((()=>[y(" 日期："+p(a.value),1)])),_:1}),f(V,{class:"q-pa-sm q-gutter-sm"},{default:i((()=>[f(b,{label:"设置日期到2025-5-16",color:"primary",onClick:t[1]||(t[1]=a=>e.$refs.calendar.setToday("2025-5-16"))}),f(b,{label:"设置年-月",color:"primary",onClick:t[2]||(t[2]=e=>n.value="1995-8")})])),_:1})])),_:1}),f(k,{title:"日历"},{default:i((()=>[f(l,{modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value=e),"today-btn":""},null,8,["modelValue"]),f(V,{class:"q-pa-sm"},{default:i((()=>[y(" 日期："+p(a.value),1)])),_:1})])),_:1}),f(k,{title:"默认年视图"},{default:i((()=>[f(l,{modelValue:a.value,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value=e),"today-btn":"","default-view":"Years"},null,8,["modelValue"]),f(V,{class:"q-pa-sm"},{default:i((()=>[y(" 日期："+p(a.value),1)])),_:1}),C("div",{class:"q-pa-sm"},' default-view = "Years" (Years | Months) ')])),_:1})],64)}}};export{N as default};
