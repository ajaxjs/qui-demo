import{_ as e,a as o}from"./q-field.Bqk7Vnj1.js";import{N as l,q as t,n as a,a2 as n,a3 as s,a4 as u,a5 as r,_ as i,T as d,a6 as m,a7 as c,a8 as f,o as p,g as b,w as _,d as h,C as v,D as g,B as V,m as y,a9 as q,r as k,a as x,b as j,k as S,f as U,t as F}from"./index-TqW3uz4B.js";import{_ as I}from"./q-checkbox.DYo7drhP.js";import{_ as w}from"./q-datetime.DSErLRKO.js";import{_ as N}from"./q-radio.EGSaq_GK.js";import{_ as O}from"./q-page.CJRIqz0q.js";import"./use-form.CfvgRolQ.js";import"./q-btn-group.B24baQ6R.js";import"./q-dialog.BEWGc6EX.js";import"./use-model-toggle.BNOt8muH.js";import"./date-nongli.BjaBr7_O.js";let R=[];const B=i(l({name:"QForm",inheritAttrs:!1,props:{...t,autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:l,attrs:t}){const i=d(),p=a(null);let b=0;const _=[];function h(o){const t="boolean"==typeof o?o:!0!==e.noErrorFocus,a=++b,n=(e,o)=>{l("validation"+(!0===e?"Success":"Error"),o)},s=e=>{const o=e.validate();return"function"==typeof o.then?o.then((o=>({valid:o,comp:e})),(o=>({valid:!1,comp:e,err:o}))):Promise.resolve({valid:o,comp:e})};return(!0===e.greedy?Promise.all(_.map(s)).then((e=>e.filter((e=>!0!==e.valid)))):_.reduce(((e,o)=>e.then((()=>s(o).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]))).then((e=>{if(void 0===e||0===e.length)return a===b&&n(!0),!0;if(a===b){const{comp:o,err:l}=e[0];if(void 0!==l&&console.error(l),n(!1,o),!0===t){const o=e.find((({comp:e})=>"function"==typeof e.focus&&!1===m(e.$)));void 0!==o&&o.comp.focus()}}return!1}))}function v(){b++,_.forEach((e=>{"function"==typeof e.resetValidation&&e.resetValidation()}))}function g(o){const t=b+1;h().then((a=>{t===b&&!0===a&&(void 0!==e.onSubmit?l("submit",o):void 0!==o&&void 0!==o.target&&"function"==typeof o.target.submit&&o.target.submit())}))}function V(o){l("reset"),c((()=>{v(),!0===e.autofocus&&!0!==e.noResetFocus&&y()}))}function y(){var e;e=()=>{if(null===p.value)return;const e=p.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||p.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||p.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(p.value.querySelectorAll("[tabindex]"),(e=>e.tabIndex>-1));null!=e&&e.focus({preventScroll:!0})},0===R.length&&e()}n(f,{bindComponent(e){_.push(e)},unbindComponent(e){const o=_.indexOf(e);o>-1&&_.splice(o,1)}});let q=!1;return s((()=>{q=!0})),u((()=>{!0===q&&!0===e.autofocus&&y()})),r((()=>{!0===e.autofocus&&y()})),Object.assign(i.proxy,{validate:h,resetValidation:v,submit:g,reset:V,focus:y,getValidationComponents:()=>_}),console.log(i.proxy),{submit:g,reset:V}}}),[["render",function(e,o,l,t,a,n){const s=y,u=q;return p(),b(u,{ref:"rootRef",class:"q-form",onSubmit:e.submit,onReset:e.reset},{default:_((()=>[h(s,{class:v(e.className),style:g(e.styles)},{default:_((()=>[V(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["onSubmit","onReset"])}],["__scopeId","data-v-74d1d0fb"]]);const E=i({data:()=>({statusOpt:[{label:"在线",value:"在线",icon:"emoji_emotions"},{label:"离线",value:"离线",icon:"sentiment_neutral"},{label:"勿扰",value:"勿扰",icon:"block"}],hobby:[{label:"听音乐",value:"听音乐",uncheckedIcon:"headset"},{label:"打篮球",value:"打篮球",uncheckedIcon:"sports_basketball"},{label:"看电影",value:"看电影",uncheckedIcon:"theaters"},{label:"玩手机",value:"刷手机",uncheckedIcon:"phone"},{label:"玩手机",value:"玩游戏",uncheckedIcon:"sports_esports"}],prms:{},info:{hobby:["看电影"]}}),methods:{submit(e){console.log("submit",e)}}},[["render",function(l,t,a,n,s,u){const r=k(x("q-input"),e),i=y,d=k(x("q-checkbox"),I),m=k(x("q-btn"),S),c=k(x("q-form"),B),f=j("Lanmu"),v=k(x("q-datetime"),w),g=k(x("q-field"),o),V=k(x("q-radio"),N),q=k(x("q-page"),O);return p(),b(q,null,{default:_((()=>[h(f,{title:"用户登录"},{default:_((()=>[h(c,{className:"myform q-gutter-md"},{default:_((()=>[h(i,null,{default:_((()=>[h(r,{modelValue:s.prms.username,"onUpdate:modelValue":t[0]||(t[0]=e=>s.prms.username=e),label:"用户名",outlined:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(r,{modelValue:s.prms.password,"onUpdate:modelValue":t[1]||(t[1]=e=>s.prms.password=e),label:"密码",outlined:"",password:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(d,{modelValue:s.prms.remember,"onUpdate:modelValue":t[2]||(t[2]=e=>s.prms.remember=e),val:1,label:"记住密码"},null,8,["modelValue"])])),_:1}),h(i,{class:"q-gutter-x-sm"},{default:_((()=>[h(m,{type:"submit",label:"立即提交",color:"primary"}),h(m,{type:"reset",label:"重置表单",color:"green"})])),_:1})])),_:1}),h(i,{class:"q-pa-md bg-orange-2 q-mt-md"},{default:_((()=>[U(F(JSON.stringify(s.prms)),1)])),_:1})])),_:1}),h(f,{title:"用户资料"},{default:_((()=>[h(c,{className:"myform q-gutter-md"},{default:_((()=>[h(i,null,{default:_((()=>[h(r,{modelValue:s.info.username,"onUpdate:modelValue":t[3]||(t[3]=e=>s.info.username=e),label:"用户昵称",outlined:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(r,{modelValue:s.info.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>s.info.phone=e),type:"tel",label:"电话号码",outlined:""},null,8,["modelValue"])])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"生日","stack-label":!!s.info.born},{control:_((()=>[h(v,{modelValue:s.info.born,"onUpdate:modelValue":t[5]||(t[5]=e=>s.info.born=e)},null,8,["modelValue"])])),_:1},8,["stack-label"])])),_:1}),h(i,{class:""},{default:_((()=>[h(g,{outlined:"",label:"用户性别","stack-label":""},{control:_((()=>[h(V,{modelValue:s.info.sex,"onUpdate:modelValue":t[6]||(t[6]=e=>s.info.sex=e),options:["男","女"],"checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"])])),_:1})])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"状态","stack-label":""},{control:_((()=>[h(V,{modelValue:s.info.status,"onUpdate:modelValue":t[7]||(t[7]=e=>s.info.status=e),options:s.statusOpt},null,8,["modelValue","options"])])),_:1})])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"兴趣爱好","stack-label":"",autogrow:""},{control:_((()=>[h(d,{modelValue:s.info.hobby,"onUpdate:modelValue":t[8]||(t[8]=e=>s.info.hobby=e),options:s.hobby},null,8,["modelValue","options"])])),_:1})])),_:1}),h(i,null,{default:_((()=>[h(g,{outlined:"",label:"标签","stack-label":"",autogrow:""},{control:_((()=>[h(d,{modelValue:s.info.tags,"onUpdate:modelValue":t[9]||(t[9]=e=>s.info.tags=e),options:["颜值担当","实力不凡","一夫当关","万夫莫开"]},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),h(i,{class:"q-pa-md bg-orange-2 q-mt-md"},{default:_((()=>[U(F(JSON.stringify(s.info)),1)])),_:1})])),_:1})])),_:1})}]]);export{E as default};
